---
title: "Lab 03 - Nobel laureates"
author: "Ben Hardin"
date: "1-23-2023"
output: github_document
---

### Load packages and data

```{r load-packages, message=FALSE}
library(tidyverse) 
```

```{r load-data, message=FALSE}
nobel <- read_csv("data/nobel.csv")
```

## Exercises

### Exercise 1

There are 26 variables and 935 observations. In this case, the observations are people (nobel prize winning people!)

```{r num-columns-rows}
glimpse(nobel)
```

### Exercise 2

This code makes a new dataframe which contains only nobel laureates who (1) have country data available, (2) are people and not organizations, & (3) are still alive. By glimpsing at the data, we confirm that the new dataframe contains 228 people.

```{r make-new-df}
nobel_living <- nobel %>%
  filter(
    !is.na(country),
    gender != "org",
    is.na(died_date))

#verifying this code worked
glimpse(nobel_living)
```
### Exercise 3

This code chunk creates the dataset that we need to answer the question in Exercise 3, showing how many nobel laureates in the sciences were based in the US or somewhere else when they got their prize.

```{r getting-usa-scientists}
#creating USA variable
nobel_living <- nobel_living %>%
  mutate(country_us = if_else(country == "USA", "USA", "other"))

#filtering for sciences
nobel_living_science <- nobel_living %>%
  filter(category %in% c("Physics", "Medicine", "Chemistry", "Economics"))
```

The visualization shows that, generally, nobel prizes for the sciences have more often been awarded to people living in the US than people living elsewhere. This difference is the greatest for Economics, while the difference is smallest for Chemistry. This supports Buzzfeed's claim that "Most living Nobel laureates in the sciences are based in the US."

```{r visualizing-category-country}
ggplot(data = nobel_living_science,
       aes(x = country_us))+
  geom_bar(color = "black")+
  facet_wrap(~ category)+
  coord_flip()+
  labs(y = "Number of Nobel Prizes",
       x = "Country at time of award")
```
### Exercise 4

```{r make-born-country}
nobel_living_science <- nobel_living_science %>%
  mutate(born_country_us = if_else(born_country == "USA", "USA", "other"))
```
### Exercise 5
```{r visualizing-country-by-birth-country}
ggplot(data = nobel_living_science,
       aes(x = country_us,
           fill = born_country_us))+
  geom_bar(color = "black", position = "stack")+
  scale_fill_manual(values = c("grey", "black"))+
  facet_wrap(~ category)+
  coord_flip()+
  labs(y = "Number of Nobel Prizes",
       x = "Country at time of award",
       fill = "Country of birth")
```


### Exercise 6
```{r getting-count-of-origin-countries}
nobel_living_science %>%
  filter(country_us == "USA", born_country_us == "other") %>%
  count(born_country) %>%
  arrange(desc(n))
```